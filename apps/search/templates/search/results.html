<!DOCTYPE html>
<html>
<head>
	{%load static%}
	<title>WWB Catalog Search | Results</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="{%static 'search/scripts.js' %}"></script>


</head>
<body>
<h1>Results:</h1>
<br>
<h3>TODO:</h3>
<ul>
	<li><del>Need to make the table sortable.</del></li>
	<li><del>Need to make search results exportable.</del></li>
	<li>Fix the routing/directoy issues for file save/serve. Dedicated folder on server, in search app directory, for files.</li>
	<li>Supply a default filename but allow user to enter a custom filename for the download.</li>
	<li>Use bootstrap for CSS. Add up/down glyphicon to table headings.</li>
	<li>Need to perform each search individually, so that if the script breaks for some reason (connection timeout, server thinks it's being spammed and rejects requests, etc) some of the results are recoverable (Here heed Tim's advice and move the search function to its own module.)
	</li>
	<li>Large searches may take some time. So we may want to have an intermediary "counting" page or message window (use bootstrap to create this) which will say, A) that the search is in progress and searching title number x of y B) that will allow you to cancel the search at any point, but will return any results gathered before search was cancelled.</li>
</ul>
<table id='results_table'>
<tr>
	<th class='1'>Item #</th>
	<th class='2'>Title</th>
	<th class='3'>ISBN</th>
	<th class='4'>Search Results</th>
</tr>
{%for book in results%}
<tr>
	<td class='1'>{{book.item_number}}</td>
	<td class='2'>{{book.title}}</td>
	<td class='3'>ISBN {{book.isbn}}</td>
	<td class='4'><a href='{{urls.0}}{{book.isbn}}{{urls.1}}' target="_blank">{{book.match}}</a></td>
</tr>
{%endfor%}
</table>
<br>
<form action='/search/create_file' method='post'>
	{% csrf_token %}
	<label for='filetype'>Export search results as:</label>
	<select name='filetype'>
		<option value='excel'>Excel 2010 (.xlsx)</option>
		<option value='csv'>Comma Seperated Value (.csv)</option>
	</select>
	<input type="submit" name="submit" value="Export">
</form>
<a href="/">Home</a>
</body>
</html>